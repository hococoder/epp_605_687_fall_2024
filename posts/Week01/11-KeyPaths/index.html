<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Mobile Application Development for the iOS Platform"/><link rel="canonical" href="https://hococoder.com/posts/Week01/11-KeyPaths"/><meta name="twitter:url" content="https://hococoder.com/posts/Week01/11-KeyPaths"/><meta name="og:url" content="https://hococoder.com/posts/Week01/11-KeyPaths"/><title>Week 1 - Keypaths | Mobile Application Development for the iOS Platform</title><meta name="twitter:title" content="Week 1 - Keypaths | Mobile Application Development for the iOS Platform"/><meta name="og:title" content="Week 1 - Keypaths | Mobile Application Development for the iOS Platform"/><meta name="description" content="A description of my first post."/><meta name="twitter:description" content="A description of my first post."/><meta name="og:description" content="A description of my first post."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><link rel="stylesheet" href="../../../styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Mobile Application Development for the iOS Platform"/></head><body><header><div class="wrapper"><a class="site-name" href="/">Mobile Application Development for the iOS Platform</a><nav><ul><li><a href="/epp_605_687_spring_2024/posts/Intro/About Me">AboutMe</a></li><li><a href="/epp_605_687_spring_2024/posts/Intro/Example App">ExampleApp</a></li><li><a href="/epp_605_687_spring_2024/posts/Week00/00-Week00Overview">Week0</a></li><li><a href="/epp_605_687_spring_2024/posts/Week01/00-Week01Overview">Week1</a></li><li><a href="/epp_605_687_spring_2024/posts/Week02/00-Week02Overview">Week2</a></li><li><a href="/epp_605_687_spring_2024/posts/Week03/00-Week03Overview">Week3</a></li><li><a href="/epp_605_687_spring_2024/posts/Week04/00-Week04Overview">Week4</a></li><li><a href="/epp_605_687_spring_2024/posts/Week05/00-Week05Overview">Week5</a></li><li><a href="/epp_605_687_spring_2024/posts/Week06/00-Week06Overview">Week6</a></li><li><a href="/epp_605_687_spring_2024/posts/Week07/00-Week07Overview">Week7</a></li><li><a href="/epp_605_687_spring_2024/posts/Week08/00-Week08Overview">Week8</a></li><li><a href="/epp_605_687_spring_2024/posts/Week09/00-Week09Overview">Week9</a></li><li><a href="/epp_605_687_spring_2024/posts/Week10/00-Week10Overview">Week10</a></li><li><a href="/epp_605_687_spring_2024/posts/Week11/00-Week11Overview">Week11</a></li><li><a href="/epp_605_687_spring_2024/posts/Week12/00-Week12Overview">Week12</a></li><li><a href="/epp_605_687_spring_2024/posts/Week13/00-Week13Overview">Week13</a></li></ul></nav></div></header><div class="wrapper"><h1>Week 1 - Keypaths</h1><p style="float: left">Previous:  <A HREF="../10-TheGuardStatement/index.html">The Guard Statement</A></p><p style="float: right">Next:  <A HREF="../12-FunctionalProgramming/index.html" class="nextModule">Functional Programming</A></p><BR/><BR/><h2>Overview</h2><center> <iframe width="1280" height="720" src="https://cdnapisec.kaltura.com/html5/html5lib/v2.81.2/mwEmbedFrame.php/p/1458241/uiconf_id/14487351/entry_id/1_mgfo0zs9?wid=_1458241&iframeembed=true&playerId=kaltura_player&entry_id=1_mgfo0zs9&flashvars[localizationCode]=en&amp;flashvars[leadWithHTML5]=true&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[mediaProxy.preferedFlavorBR]=2500&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;flashvars[EmbedPlayer.NotPlayableDownloadLink]=true;&wid=1_abkvs1gz"allowfullscreen webkitallowfullscreen mozAllowFullScreen allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player">
  </iframe>
</center><p>Sometimes when working with Properties, you might want to refer to (hold a reference to) the property <em>itself</em> rather than the underlying value stored in the property. Those references can be passed around like any other entity in our code, used in expressions, or allow code to get or set a property without knowing which one it is dealing with. Let's look at the <code>Person</code> struct we've used previously:</p><pre><code><span class="keyword">struct</span> Person {
  <span class="keyword">var</span> name: <span class="type">String</span>
  <span class="keyword">let</span> dob: <span class="type">Date</span>
}
</code></pre><p>To reference the <code>name</code> keypath in the Struct, you refer to it like this:</p><pre><code><span class="keyword">let</span> nameKeyPath = \<span class="type">Person</span>.<span class="property">name</span>
</code></pre><p>Note the "<code>\</code>" here - this avoids conflicts with referring to static properties for a type.<br><br>If nested types are present - where a type depends on another type - KeyPaths can also be chained together.</p><pre><code><span class="keyword">struct</span> PhysicalCharacteristics {
  <span class="keyword">var</span> weight: <span class="type">Double</span>
  <span class="keyword">var</span> height: <span class="type">Double</span>
}

<span class="keyword">struct</span> Person2 {
  <span class="keyword">var</span> name: <span class="type">String</span>
  <span class="keyword">let</span> dob: <span class="type">Date</span>
  <span class="keyword">var</span> characteristics: <span class="type">PhysicalCharacteristics</span>
}

<span class="keyword">let</span> heightKeyPath = \<span class="type">Person2</span>.<span class="property">characteristics</span>.<span class="property">height</span>
</code></pre><p>These can also be appended together to get the same result:</p><pre><code><span class="keyword">let</span> characteristicsKeyPath = \<span class="type">Person2</span>.<span class="property">characteristics</span>
<span class="keyword">let</span> heightKeyPath2 = characteristicsKeyPath.<span class="call">appending</span>(path: \<span class="type">PhysicalCharacteristics</span>.<span class="property">height</span>)
</code></pre><h2>Reading and Writing Values with KeyPaths</h2><p>OK, so you know how to compose a KeyPath - now what can you do with them? One thing is that you can use them to read and write values. Let's make a person and read their name using a KeyPath:</p><pre><code><span class="keyword">let</span> characteristics = <span class="type">PhysicalCharacteristics</span>(weight: <span class="number">160</span>, height: <span class="number">70</span>)
<span class="keyword">var</span> josh = <span class="type">Person2</span>(name: <span class="string">"Josh"</span>, dob: <span class="type">Date</span>(), characteristics: characteristics)  <span class="comment">//using a dummy date here - Date() is the date "now"</span>
<span class="keyword">let</span> name = josh[keyPath: \<span class="type">Person2</span>.<span class="property">name</span>]
</code></pre><p>As you can see the name is obtained not by our usual <code>josh.name</code> syntax, but instead uses the keyPath to reference into the set of available KeyPaths in the <code>josh</code> instance.<br><br>Let's take a look at the types of our KeyPaths, since that isn't something we've discussed yet:</p><pre><code><span class="call">print</span>(<span class="call">type</span>(of: \<span class="type">Person2</span>.<span class="property">name</span>))
<span class="call">print</span>(<span class="call">type</span>(of: \<span class="type">Person2</span>.<span class="property">dob</span>))
</code></pre><p>If you put those in the playground and run it, it turns out that <code>\Person2.name</code> is of type <code>WriteableKeyPath&lt;Person2, String&gt;</code> and <code>\Person2.dob</code> is of type <code>KeyPath&lt;Person2, Date&gt;</code>. These make sense - <code>name</code> is a variable and is of type <code>String</code> (and belongs to the <code>Person2</code> type) and the <code>dob</code> is of type <code>Date</code> and is a constant - therefore it is only of type <code>KeyPath</code>.</p><p>Since <code>\Person2.name</code> is writeable, we can change it via KeyPaths</p><pre><code>josh[keyPath: \<span class="type">Person2</span>.<span class="property">name</span>] = <span class="string">"Joshua"</span>
</code></pre><h2>OK, so what?</h2><p>The above examples for reading and writing still don't show anything special - you can get that same functionality by referencing the instance properties directly. John Sundell has a great example <a href="https://www.swiftbysundell.com/articles/the-power-of-key-paths-in-swift/">here</a> to illustrate how referencing properties by KeyPaths can be very powerful. Let's use that as an example.</p><p>If you have used iOS <em>at all</em> over the years, you have probably seen data presented in a table format, where there can be an Image, a Title to the table cell, and a Subtitle if you want. John came up with a great struct to help with configuring the cell, keeping it generic:</p><pre><code><span class="keyword">struct</span> CellConfigurator&lt;Model&gt; {
    <span class="keyword">let</span> titleKeyPath: <span class="type">KeyPath</span>&lt;<span class="type">Model</span>, <span class="type">String</span>&gt;
    <span class="keyword">let</span> subtitleKeyPath: <span class="type">KeyPath</span>&lt;<span class="type">Model</span>, <span class="type">String</span>&gt;
    <span class="keyword">let</span> imageKeyPath: <span class="type">KeyPath</span>&lt;<span class="type">Model</span>, <span class="type">UIImage</span>?&gt;

    <span class="keyword">func</span> configure(<span class="keyword">_</span> cell: <span class="type">UITableViewCell</span>, for model: <span class="type">Model</span>) {
        cell.<span class="property">textLabel</span>?.<span class="property">text</span> = model[keyPath: titleKeyPath]
        cell.<span class="property">detailTextLabel</span>?.<span class="property">text</span> = model[keyPath: subtitleKeyPath]
        cell.<span class="property">imageView</span>?.<span class="property">image</span> = model[keyPath: imageKeyPath]
    }
}
</code></pre><p>Here, since we're keeping the type generic, we don't know exactly what the type specified by <code>Model</code> will entail. We do know however, that we want a property to specify the title, another to specify the subtitle, and a final property to specify the Image used. This sounds like a great use for KeyPaths! Those KeyPaths are passed in as the arguments to the struct (thanks to the automatically generated initializer), and are used to grab the values out of the passed in model object in the <code>configure</code> method. Here are some calls to the struct to configure a Song and Playlist cell:</p><pre><code><span class="keyword">struct</span> Song {
  <span class="keyword">var</span> name: <span class="type">String</span>
  <span class="keyword">var</span> artistName: <span class="type">String</span>
  <span class="keyword">var</span> albumArtwork: <span class="type">UIImage</span>?
}
<span class="keyword">struct</span> Playlist {
  <span class="keyword">var</span> title: <span class="type">String</span>
  <span class="keyword">var</span> authorName: <span class="type">String</span>
  <span class="keyword">var</span> artwork: <span class="type">UIImage</span>?
}

<span class="keyword">let</span> songCellConfigurator = <span class="type">CellConfigurator</span>&lt;<span class="type">Song</span>&gt;(
    titleKeyPath: \.<span class="property">name</span>,
    subtitleKeyPath: \.<span class="property">artistName</span>,
    imageKeyPath: \.<span class="property">albumArtwork</span>
)

<span class="keyword">let</span> playlistCellConfigurator = <span class="type">CellConfigurator</span>&lt;<span class="type">Playlist</span>&gt;(
    titleKeyPath: \.<span class="property">title</span>,
    subtitleKeyPath: \.<span class="property">authorName</span>,
    imageKeyPath: \.<span class="property">artwork</span>
)
</code></pre><p>The generic type is different in each case - <code>Song</code> and <code>Playlist</code> - and they each have their own sets of KeyPaths that are passed in order to get the correct values to populate the cell.</p><p>There are some other areas - especially when dealing with SwiftUI and while working with collections - where we will run into KeyPaths again. So keep this module handy as a reference!</p><p>Speaking of collections - we'll take a look at those next.</p><p style="float: left">Previous:  <A HREF="../10-TheGuardStatement/index.html">The Guard Statement</A></p><p style="float: right">Next:  <A HREF="../12-FunctionalProgramming/index.html" class="nextModule">Functional Programming</A></p></div><footer><p>Generated with ❤️ using <a href="https://github.com/johnsundell/publish">Publish</a></p><p>© 2023-2024 Josh Steele (rsteele3@jhu.edu) <a href="mailto:"(rsteele3@jhu.edu)""></a></p><p>Last updated January 21, 2024 at 1:48 PM</p><p><a href="https://mastodon.social/@hococoder" target="_blank">My Mastodon</a> | <a href="https://github.com/hococoder" target="_blank">My GitHub</a> | <a href="https://ep.jhu.edu" target="_blank">Whiting School EPP</a> | <a href="https://canvas.jhu.edu" target="_blank">JHU Canvas</a></p></footer></body></html>