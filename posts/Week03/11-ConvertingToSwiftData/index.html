<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Mobile Application Development for the iOS Platform"/><link rel="canonical" href="https://hococoder.com/posts/Week03/11-ConvertingToSwiftData"/><meta name="twitter:url" content="https://hococoder.com/posts/Week03/11-ConvertingToSwiftData"/><meta name="og:url" content="https://hococoder.com/posts/Week03/11-ConvertingToSwiftData"/><title>Week 3 - Converting to SwiftData | Mobile Application Development for the iOS Platform</title><meta name="twitter:title" content="Week 3 - Converting to SwiftData | Mobile Application Development for the iOS Platform"/><meta name="og:title" content="Week 3 - Converting to SwiftData | Mobile Application Development for the iOS Platform"/><meta name="description" content="A description of my first post."/><meta name="twitter:description" content="A description of my first post."/><meta name="og:description" content="A description of my first post."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><link rel="stylesheet" href="../../../styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Mobile Application Development for the iOS Platform"/></head><body><header><div class="wrapper"><a class="site-name" href="/">Mobile Application Development for the iOS Platform</a><nav><ul><li><a href="/epp_605_687_spring_2024/posts/Intro/About Me">AboutMe</a></li><li><a href="/epp_605_687_spring_2024/posts/Intro/Example App">ExampleApp</a></li><li><a href="/epp_605_687_spring_2024/posts/Week00/00-Week00Overview">Week0</a></li><li><a href="/epp_605_687_spring_2024/posts/Week01/00-Week01Overview">Week1</a></li><li><a href="/epp_605_687_spring_2024/posts/Week02/00-Week02Overview">Week2</a></li><li><a href="/epp_605_687_spring_2024/posts/Week03/00-Week03Overview">Week3</a></li><li><a href="/epp_605_687_spring_2024/posts/Week04/00-Week04Overview">Week4</a></li><li><a href="/epp_605_687_spring_2024/posts/Week05/00-Week05Overview">Week5</a></li><li><a href="/epp_605_687_spring_2024/posts/Week06/00-Week06Overview">Week6</a></li><li><a href="/epp_605_687_spring_2024/posts/Week07/00-Week07Overview">Week7</a></li><li><a href="/epp_605_687_spring_2024/posts/Week08/00-Week08Overview">Week8</a></li><li><a href="/epp_605_687_spring_2024/posts/Week09/00-Week09Overview">Week9</a></li><li><a href="/epp_605_687_spring_2024/posts/Week10/00-Week10Overview">Week10</a></li><li><a href="/epp_605_687_spring_2024/posts/Week11/00-Week11Overview">Week11</a></li><li><a href="/epp_605_687_spring_2024/posts/Week12/00-Week12Overview">Week12</a></li><li><a href="/epp_605_687_spring_2024/posts/Week13/00-Week13Overview">Week13</a></li></ul></nav></div></header><div class="wrapper"><h1>Week 3 - Converting to SwiftData</h1><p style="float: left">Previous:  <A HREF="../10-IntroductionToSwiftData/index.html">Introduction to SwiftData</A></p><p style="float: right">Next:  <A HREF="../../Week04/00-Week04Overview/index.html" class="nextModule">Week 4 Overview</A></p><BR/><BR/><h2>Some Warning Upfront</h2><p>Ok, an up front set of warnings:</p><ul><li>SwiftData, as of 2023, is still VERY new. It is, at this point, not meant to be a complete replacement for Core Data, since it simply cannot do everything Core Data can</li><li>Along those same lines, there are bound to be many bugs in SwiftData.</li></ul><h2>Making things simpler with SwiftData</h2><p>Let's say you have an existing app that uses Core Data, but you want to switch to SwiftData. What do you need to do?</p><h3>Convert your <code>xcdatamodeld</code> file to a series of <code>@Model</code> classes</h3><p>Each entity in your <code>xcdatamodeld</code> - and their associated relationships - can be converted to a series of classes decorated with a <code>@Model</code> macro. We saw an example of this in the last module where we defined the <code>Assignment</code> and <code>AssignmentGrade</code> classes. Relationships are simply defined by declaring that one class depend on the other. You only need to define one side of the relationship - SwiftData will handle the other direction. In the case of the <code>Assignment</code>, the grades were declared with an array of <code>AssignmentGrade</code>s, which means that an assignment has 1 or more grades attached to it. The inferred inverse here is that each grade only has one assignment associated with it.</p><p>Once you have all your <code>@Model</code> objects in place, you can delete your <code>xcdatamodeld</code> file!</p><h3>Convert all your <code>@FetchRequest</code>s to <code>@Query</code> calls</h3><p>SwiftData uses <code>@Query</code> to perform the queries, which syntactically can be much more compact that <code>@FetchRequest</code>. Remember that <code>@Query</code> uses the Observation mechanism that was introduced in iOS 17 to automatically refresh the user interface when changes to the database take place (if they in turn change the results of your query).</p><h3>Remove the <code>Persistence.swift</code> file</h3><p>Once you switch to SwiftData, there is no need to have the Persistence.swift file setup the CoreData persistence stack. However, you may still want to have a preview container for your SwiftUI Previews! You can do that like this:</p><pre><code><span class="keyword">static let</span> container = <span class="keyword">try</span>! <span class="type">ModelContainer</span>(for: [<span class="type">Assignment</span>.<span class="keyword">self</span>, <span class="type">AssignmentGrade</span>.<span class="keyword">self</span>], configurations: <span class="type">ModelConfiguration</span>(inMemory: <span class="keyword">true</span>)
</code></pre><p>This looks very similar to the <code>.modelContainer</code> modifier. In fact there is a version of <code>.modelContainer</code> that takes in a <code>ModelContainer</code>:</p><pre><code>.<span class="call">modelContainer</span>(container)
</code></pre><p>So in your preview code, you can simply attach that modifier onto whatever view needs the SwiftData model and you're set!</p><p>That is the basics on upgrading your Core Data model to a SwiftData one, with more to come I'm sure as SwiftData reaches more parity with Core Data.</p><p style="float: left">Previous:  <A HREF="../10-IntroductionToSwiftData/index.html">Introduction to SwiftData</A></p><p style="float: right">Next:  <A HREF="../../Week04/00-Week04Overview/index.html" class="nextModule">Week 4 Overview</A></p></div><footer><p>Generated with ❤️ using <a href="https://github.com/johnsundell/publish">Publish</a></p><p>© 2023-2024 Josh Steele (rsteele3@jhu.edu) <a href="mailto:"(rsteele3@jhu.edu)""></a></p><p>Last updated January 21, 2024 at 1:48 PM</p><p><a href="https://mastodon.social/@hococoder" target="_blank">My Mastodon</a> | <a href="https://github.com/hococoder" target="_blank">My GitHub</a> | <a href="https://ep.jhu.edu" target="_blank">Whiting School EPP</a> | <a href="https://canvas.jhu.edu" target="_blank">JHU Canvas</a></p></footer></body></html>