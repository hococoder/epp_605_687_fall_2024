<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Mobile Application Development for the iOS Platform"/><link rel="canonical" href="https://hococoder.com/posts/Week03/01-YourAppsDirectoryStructure"/><meta name="twitter:url" content="https://hococoder.com/posts/Week03/01-YourAppsDirectoryStructure"/><meta name="og:url" content="https://hococoder.com/posts/Week03/01-YourAppsDirectoryStructure"/><title>Week 3 - Your App's Directory Structure | Mobile Application Development for the iOS Platform</title><meta name="twitter:title" content="Week 3 - Your App's Directory Structure | Mobile Application Development for the iOS Platform"/><meta name="og:title" content="Week 3 - Your App's Directory Structure | Mobile Application Development for the iOS Platform"/><meta name="description" content="A description of my first post."/><meta name="twitter:description" content="A description of my first post."/><meta name="og:description" content="A description of my first post."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><link rel="stylesheet" href="../../../styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Mobile Application Development for the iOS Platform"/></head><body><header><div class="wrapper"><a class="site-name" href="/">Mobile Application Development for the iOS Platform</a><nav><ul><li><a href="/epp_605_687_spring_2024/posts/Intro/About Me">AboutMe</a></li><li><a href="/epp_605_687_spring_2024/posts/Intro/Example App">ExampleApp</a></li><li><a href="/epp_605_687_spring_2024/posts/Week00/00-Week00Overview">Week0</a></li><li><a href="/epp_605_687_spring_2024/posts/Week01/00-Week01Overview">Week1</a></li><li><a href="/epp_605_687_spring_2024/posts/Week02/00-Week02Overview">Week2</a></li><li><a href="/epp_605_687_spring_2024/posts/Week03/00-Week03Overview">Week3</a></li><li><a href="/epp_605_687_spring_2024/posts/Week04/00-Week04Overview">Week4</a></li><li><a href="/epp_605_687_spring_2024/posts/Week05/00-Week05Overview">Week5</a></li><li><a href="/epp_605_687_spring_2024/posts/Week06/00-Week06Overview">Week6</a></li><li><a href="/epp_605_687_spring_2024/posts/Week07/00-Week07Overview">Week7</a></li><li><a href="/epp_605_687_spring_2024/posts/Week08/00-Week08Overview">Week8</a></li><li><a href="/epp_605_687_spring_2024/posts/Week09/00-Week09Overview">Week9</a></li><li><a href="/epp_605_687_spring_2024/posts/Week10/00-Week10Overview">Week10</a></li><li><a href="/epp_605_687_spring_2024/posts/Week11/00-Week11Overview">Week11</a></li><li><a href="/epp_605_687_spring_2024/posts/Week12/00-Week12Overview">Week12</a></li><li><a href="/epp_605_687_spring_2024/posts/Week13/00-Week13Overview">Week13</a></li></ul></nav></div></header><div class="wrapper"><h1>Week 3 - Your App's Directory Structure</h1><p style="float: left">Previous:  <A HREF="../00-Week03Overview/index.html">Week 3 Overview</A></p><p style="float: right">Next:  <A HREF="../02-IntroductionToUserDefaults/index.html" class="nextModule">Introduction to User Defaults</A></p><BR/><BR/><h2>When is an .app not an app?</h2><p>Applications on both iOS and macOS are actually app bundles. On the file system, they are actually a directory structure that contains the executable as well as other app data. One feature of storing the apps this way on the system is that it sandboxes the apps from one another; this keeps apps from being able to see the data in other app’s directories. Extension points are the only mechanism in which apps can communicate functionality with one another, and that mechanism is handled by the operating system. Other system data such as pictures and contacts are also handled through various System Framework calls.</p><img src="../../../week03/sandbox.png#center" alt="A visual representation of an iOS app bundle"/><p>Apple provides guidelines for where to store particular types of data within your app. Be sure to closely adhere to these guidelines or your app may be rejected during the approval process.</p><ul><li>The <em>documents</em> directory is where you store:<ul><li>Documents (naturally)</li><li>User generated data, or data that can’t be reconstructed by the app.</li><li>NOTE: This directory is automatically backed up to iCloud.</li></ul></li></ul><ul><li>The <em>cache</em> directory is used to:<ul><li>Store data that can be downloaded or reconstructed, such as a database cache or a set of map tiles.</li></ul></li></ul><ul><li>The <em>temp</em> directory contains temporary data that isn’t backed up to iCloud.<ul><li>Be sure to clear this directory occasionally to save space on the system.</li></ul></li></ul><ul><li>You can specify a “do not backup” attribute on files that will tell the system to, regardless of directory location or storage availability to not backup this file to iCloud OR allow it to be purged from the system. This attribute should be used for files that are vital for the operation of your app.</li></ul><h2>The Simulator Directory Structure</h2><p>Now since we’ve talked about how an app's files are grouped on the system, let’s talk about how to access that data. First - where does that data reside? The iOS SDK provides calls to get various file paths on the system. This is due to the fact that there is no “set” directory for a given app on a system - it will vary from device to device, so you have to ask the OS for the exact location. If you want to see what I mean, be sure to check out the simulator’s directory structure on your system. The video below from an earlier offering of the course shows you what I mean (you can ignore the parts of the video that talk about things we haven't covered yet). While accessible and technically human-readable, each iOS-Simulator version is under its own hashcoded directory name, and under that each application on the simulator is under its own hashcoded directory. So, finding files in your simulator is possible, but difficult.<br><br></p><center> <iframe width="1280" height="720" src="https://cdnapisec.kaltura.com/html5/html5lib/v2.81.2/mwEmbedFrame.php/p/1458241/uiconf_id/14487351/entry_id/1_sowvliz4?wid=_1458241&iframeembed=true&playerId=kaltura_player&entry_id=1_sowvliz4&flashvars[localizationCode]=en&amp;flashvars[leadWithHTML5]=true&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[mediaProxy.preferedFlavorBR]=2500&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;flashvars[EmbedPlayer.NotPlayableDownloadLink]=true;&wid=1_abkvs1gz"allowfullscreen webkitallowfullscreen mozAllowFullScreen allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player">
  </iframe>
</center><p>Luckily iOS provides API that allow you to piece together directory names when you need them.</p><h2>Local Directory Access</h2><p>To keep you from needing to know the particular hashcoded directory name for a directory, the <code>URL</code> class has some static members that provide standard entries such as the <code>.documentDirectory</code>.</p><pre><code><span class="keyword">struct</span> Student {
  
  <span class="keyword">var</span> studentID: <span class="type">Int</span>
  <span class="keyword">var</span> grade: <span class="type">Double</span>
  
}

<span class="keyword">let</span> documentsDirectory = <span class="type">URL</span>.<span class="property">documentsDirectory</span>

<span class="keyword">let</span> filePath = <span class="string">"</span>\(documentsDirectory.<span class="property">path</span>)<span class="string">/student.obj"</span>
<span class="call">print</span>(<span class="string">"File path is</span> \(filePath)<span class="string">"</span>)

<span class="comment">//create a student object and archive/unarchive it</span>
<span class="keyword">let</span> student = <span class="type">Student</span>(studentID:<span class="number">5470</span>, grade: <span class="number">95.0</span>)

<span class="keyword">do</span> {
  <span class="comment">//First, you generate the data from the object</span>
  <span class="keyword">let</span> data = <span class="keyword">try</span> <span class="type">NSKeyedArchiver</span>.<span class="call">archivedData</span>(withRootObject: student, requiringSecureCoding: <span class="keyword">true</span>)
  <span class="comment">//then try to write that data to the URL derived from the filePath</span>
  <span class="keyword">try</span> data.<span class="call">write</span>(to: <span class="type">URL</span>(fileURLWithPath: filePath))

  <span class="comment">//to unarchive the data, use NSKeyedUnarchiver and cast it as a Student</span>
  <span class="keyword">let</span> unarchivedStudent = <span class="keyword">try</span> <span class="type">NSKeyedUnarchiver</span>.<span class="call">unarchiveTopLevelObjectWithData</span>(data) <span class="keyword">as</span>! <span class="type">Student</span>
  <span class="call">print</span>(<span class="string">"unarchived student id is</span> \(unarchivedStudent.<span class="property">studentID</span>)<span class="string">"</span>)
}
<span class="keyword">catch</span> {
  <span class="call">print</span>(<span class="string">"There was an error loading or saving the data</span> \(error)<span class="string">"</span>)
}
</code></pre><p>One special type of file that can be stored in the app's directory is the <code>UserDefaults</code> file, which we'll discuss next.</p><p style="float: left">Previous:  <A HREF="../00-Week03Overview/index.html">Week 3 Overview</A></p><p style="float: right">Next:  <A HREF="../02-IntroductionToUserDefaults/index.html" class="nextModule">Introduction to User Defaults</A></p></div><footer><p>Generated with ❤️ using <a href="https://github.com/johnsundell/publish">Publish</a></p><p>© 2023-2024 Josh Steele (rsteele3@jhu.edu) <a href="mailto:"(rsteele3@jhu.edu)""></a></p><p>Last updated January 21, 2024 at 1:48 PM</p><p><a href="https://mastodon.social/@hococoder" target="_blank">My Mastodon</a> | <a href="https://github.com/hococoder" target="_blank">My GitHub</a> | <a href="https://ep.jhu.edu" target="_blank">Whiting School EPP</a> | <a href="https://canvas.jhu.edu" target="_blank">JHU Canvas</a></p></footer></body></html>