<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Mobile Application Development for the iOS Platform"/><link rel="canonical" href="https://hococoder.com/posts/Week12/06-IntroductionToUnitTesting"/><meta name="twitter:url" content="https://hococoder.com/posts/Week12/06-IntroductionToUnitTesting"/><meta name="og:url" content="https://hococoder.com/posts/Week12/06-IntroductionToUnitTesting"/><title>Week 12 - Introduction to Unit Testing | Mobile Application Development for the iOS Platform</title><meta name="twitter:title" content="Week 12 - Introduction to Unit Testing | Mobile Application Development for the iOS Platform"/><meta name="og:title" content="Week 12 - Introduction to Unit Testing | Mobile Application Development for the iOS Platform"/><meta name="description" content="A description of my first post."/><meta name="twitter:description" content="A description of my first post."/><meta name="og:description" content="A description of my first post."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><link rel="stylesheet" href="../../../styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Mobile Application Development for the iOS Platform"/></head><body><header><div class="wrapper"><a class="site-name" href="/">Mobile Application Development for the iOS Platform</a><nav><ul><li><a href="/epp_605_687_spring_2024/posts/Intro/About Me">AboutMe</a></li><li><a href="/epp_605_687_spring_2024/posts/Intro/Example App">ExampleApp</a></li><li><a href="/epp_605_687_spring_2024/posts/Week00/00-Week00Overview">Week0</a></li><li><a href="/epp_605_687_spring_2024/posts/Week01/00-Week01Overview">Week1</a></li><li><a href="/epp_605_687_spring_2024/posts/Week02/00-Week02Overview">Week2</a></li><li><a href="/epp_605_687_spring_2024/posts/Week03/00-Week03Overview">Week3</a></li><li><a href="/epp_605_687_spring_2024/posts/Week04/00-Week04Overview">Week4</a></li><li><a href="/epp_605_687_spring_2024/posts/Week05/00-Week05Overview">Week5</a></li><li><a href="/epp_605_687_spring_2024/posts/Week06/00-Week06Overview">Week6</a></li><li><a href="/epp_605_687_spring_2024/posts/Week07/00-Week07Overview">Week7</a></li><li><a href="/epp_605_687_spring_2024/posts/Week08/00-Week08Overview">Week8</a></li><li><a href="/epp_605_687_spring_2024/posts/Week09/00-Week09Overview">Week9</a></li><li><a href="/epp_605_687_spring_2024/posts/Week10/00-Week10Overview">Week10</a></li><li><a href="/epp_605_687_spring_2024/posts/Week11/00-Week11Overview">Week11</a></li><li><a href="/epp_605_687_spring_2024/posts/Week12/00-Week12Overview">Week12</a></li><li><a href="/epp_605_687_spring_2024/posts/Week13/00-Week13Overview">Week13</a></li></ul></nav></div></header><div class="wrapper"><h1>Week 12 - Introduction to Unit Testing</h1><p style="float: left">Previous:  <A HREF="../05-IntroductionToInstruments/index.html">Introduction To Instruments</A></p><p style="float: right">Next:  <A HREF="../07-UnitTestingExample/index.html" class="nextModule">Unit Testing Example</A></p><BR/><BR/><h2>Overview</h2><center> <iframe width="1280" height="720" src="https://cdnapisec.kaltura.com/html5/html5lib/v2.81.2/mwEmbedFrame.php/p/1458241/uiconf_id/14487351/entry_id/1_x78vhekq?wid=_1458241&iframeembed=true&playerId=kaltura_player&entry_id=1_x78vhekq&flashvars[localizationCode]=en&amp;flashvars[leadWithHTML5]=true&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[mediaProxy.preferedFlavorBR]=2500&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;flashvars[EmbedPlayer.NotPlayableDownloadLink]=true;&wid=1_abkvs1gz"allowfullscreen webkitallowfullscreen mozAllowFullScreen allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player">
  </iframe>
</center><p>Xcode supports 3 different types of testing - functional tests, performance tests, and user interface tests.</p><ul><li>Functional tests focus on code functionality, of which the most common is unit testing. Here you want to test a small portion of your code, usually a method, to make sure it has repeatable and reproducible results. Some developers even write unit tests before they write their main code to help define exactly what they want to test and eventually implement. Functional tests are used to detect regressions in your code - the introduction of code that ends up changing a result from a method.</li><li>Performance tests focus on execution time, and can be used to test performance across devices.</li><li>User interface tests focus on the flow through your user interface. Every time a test is run, the local environment is setup, the test is executed and the test environment is torn down.</li></ul><p>Tests have been in your project - or at least selectable - all along! When you start a new project, after you choose a template you can define the name of the project, as well as whether you want this project to have unit or User interface tests. When this takes place, you get a test target, and from the test navigator you can run your tests and see the source code for a given test.</p><p>The XCTest Framework provides the following classes.</p><ul><li><code>XCTest</code> is the base class for testing. Most developers will not subclass this directly.</li><li><code>XCTestCase</code> represents a concrete instance of XCTest and represents a particular test you want to run.</li><li><code>XCTestRun</code> collects information about the execution of a test.</li><li><code>XCTestSuite</code> is another subclass of XCTest represents a collection of test cases that you want to run.</li><li>There are also various <code>Assertion</code> functions that allow you to easily check that a particular value is what you expect it to be.</li><li>There also also extensions for <code>XCTest</code> that allow you to deal with Key-value-observers and asynchronous calls.</li></ul><h2>Writing Test Cases</h2><p>To test your class, you’ll make a subclass of <code>XCTestCase</code>. In order to test the class, you may to initialize other objects to prepare a proper environment to test your code in. The <code>setUp</code> method can be used here, and the <code>tearDown</code> method can be used to clean up after the test - this could be anything from reclaiming memory to closing resources you opened.</p><p>Test methods use a JavaBean type of naming convention to be automatically recognized by the system. The format is shown in the code below, which is taken from the default EPGradeBook test file. The method should start with the word "test", followed by your method name with the first letter capitalized. It should take no arguments, and it returns nothing (and as usual, we can leave the Void return segment off the declaration). As long as you follow this convention, the test case will get automatically picked up by Xcode and show up in the UI.</p><pre><code><span class="keyword">class</span> EPGradeBookTests: <span class="type">XCTestCase</span> {

    <span class="keyword">override func</span> setUpWithError() <span class="keyword">throws</span> {
        <span class="comment">// Put setup code here. This method is called before the invocation of each test method in the class.</span>
    }

    <span class="keyword">override func</span> tearDownWithError() <span class="keyword">throws</span> {
        <span class="comment">// Put teardown code here. This method is called after the invocation of each test method in the class.</span>
    }

    <span class="comment">//This would test the "example()" method</span>
    <span class="keyword">func</span> testExample() <span class="keyword">throws</span> {
        <span class="comment">// This is an example of a functional test case.
        // Use XCTAssert and related functions to verify your tests produce the correct results.</span>
    }

    <span class="keyword">func</span> testPerformanceExample() <span class="keyword">throws</span> {
        <span class="comment">// This is an example of a performance test case.</span>
        <span class="keyword">self</span>.<span class="call">measure</span> {
            <span class="comment">// Put the code you want to measure the time of here.</span>
        }
    }
}
</code></pre><p>To make sure that the values you produce in your test methods are the ones you expect, you can use the wide range of assertions available in the XCTAssert class:</p><ul><li><code>XCTAssert(expression, format…)</code><ul><li>If expression is true, test passes; otherwise it fails and the message in “format” is output. Generic Assertion</li></ul></li></ul><ul><li><code>XCTAssert[True|False](expression, format…)</code></li><li><code>XCTAssert[Not]Equal(expression1, expression2, format…)</code></li><li><code>XCTAssert[Not]EqualObjects(expression1, expression2, format…)</code></li><li><code>XCTAssert[Not]EqualWithAccuracy(expression1, expression2, accuracy, format…)</code></li><li><code>XCTAssert[Not]Nil(expression, format…)</code></li><li><code>XCTFail(format…)</code><ul><li>Forces the test to fail. Useful when setting up your tests, can remind you which ones you haven't written yet.</li></ul></li></ul><p>The most basic type checks to see if an expression is true; if so, the assertion passes, otherwise the message in the format argument is presented. Other assert formats play on this behavior, but may check directly for a value being true or false, or equal, or not equals - and so on, as you can see above.</p><p>One way to test your code is to check how well the method is performing in terms of it’s execution time. You can even establish a benchmark value for the performance time so you can have something to compare it to - this is the value you are asserting against. If your method all of a sudden starts performing well away from its benchmark value, you most likely have introduced a performance regression into your code.</p><img src="../../../week12/Benchmark.png#centerResizedSlide" alt="Benchmark"/><p>As we’ve discussed previously in the course, you may perform a lot of your code asynchronously. <code>XCTestExpectation</code> provides a way for you to test this sort of behavior. You expect that, within a certain time interval, your asynchronous behavior will complete. If it isn’t, the expectation has not been met, so the test fails. To setup the test, first create an expectation.</p><pre><code><span class="keyword">let</span> expectation = <span class="call">expectationWithDescription</span>(“your description here”)
</code></pre><p>Then at the bottom of your method start to wait with the waitForExpectationWithTimeout method.</p><pre><code><span class="call">waitForExpectationWithTimeout</span>(<span class="number">10</span>) { error <span class="keyword">in</span>
       <span class="comment">//…</span>
}
</code></pre><p>Then, at the end of your completion block, call expectation.fulfill() to indicate that the expectation has been met, at which point the test will pass; however, if the timeout is reached before this happens, the test will fail.</p><pre><code>expectation.<span class="call">fulfill</span>()
</code></pre><h2>Async/Await and Unit testing</h2><p class="suggestedReading">For a great look at Unit testing with Async/Await, check out [this article from John Sundell]( https://www.swiftbysundell.com/articles/unit-testing-code-that-uses-async-await/)

Expectations are nice, but with async/await, they aren't needed anymore!  You can write your asynchronous unit test code just like synchronous test code, labeling it with async/await as usual. For example, if I had an async method called `getCoordFromString` I could test it like this:

```
func testGetCoordinate() async throws {

  let coord = await getCoordFromString("Laurel, MD")
  
  XCTestAssert(coord, LAUREL_COORD_VALUE)

}
```

If `getCoordFromString` could also throw, you could use `try await`, and then catch the possible error(s), calling `XCTFail` to force the test to fail. 

```
func testGetCoordinate() async throws {

  do {
    let coord = try await getCoordFromString("Laurel, MD")
  } catch {
    XCTFail()
  }
  XCTestAssert(coord, LAUREL_COORD_VALUE)

}
```

We'll see how these can be implemented in the example, which is in the next module.


<p style="float: left">Previous:  <A HREF="../05-IntroductionToInstruments/index.html">Introduction To Instruments</A></p>
<p style="float: right">Next:  <A HREF="../07-UnitTestingExample/index.html" class="nextModule">Unit Testing Example</A></p>

</div><footer><p>Generated with ❤️ using <a href="https://github.com/johnsundell/publish">Publish</a></p><p>© 2023-2024 Josh Steele (rsteele3@jhu.edu) <a href="mailto:"(rsteele3@jhu.edu)""></a></p><p>Last updated January 21, 2024 at 1:48 PM</p><p><a href="https://mastodon.social/@hococoder" target="_blank">My Mastodon</a> | <a href="https://github.com/hococoder" target="_blank">My GitHub</a> | <a href="https://ep.jhu.edu" target="_blank">Whiting School EPP</a> | <a href="https://canvas.jhu.edu" target="_blank">JHU Canvas</a></p></footer></body></html>