<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="Mobile Application Development for the iOS Platform"/><link rel="canonical" href="https://hococoder.com/posts/Week07/07-NotificationDetailExample"/><meta name="twitter:url" content="https://hococoder.com/posts/Week07/07-NotificationDetailExample"/><meta name="og:url" content="https://hococoder.com/posts/Week07/07-NotificationDetailExample"/><title>Week 7 - Notification Detail View Example | Mobile Application Development for the iOS Platform</title><meta name="twitter:title" content="Week 7 - Notification Detail View Example | Mobile Application Development for the iOS Platform"/><meta name="og:title" content="Week 7 - Notification Detail View Example | Mobile Application Development for the iOS Platform"/><meta name="description" content="A description of my first post."/><meta name="twitter:description" content="A description of my first post."/><meta name="og:description" content="A description of my first post."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><link rel="stylesheet" href="../../../styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to Mobile Application Development for the iOS Platform"/></head><body><header><div class="wrapper"><a class="site-name" href="/">Mobile Application Development for the iOS Platform</a><nav><ul><li><a href="/epp_605_687_spring_2024/posts/Intro/About Me">AboutMe</a></li><li><a href="/epp_605_687_spring_2024/posts/Intro/Example App">ExampleApp</a></li><li><a href="/epp_605_687_spring_2024/posts/Week00/00-Week00Overview">Week0</a></li><li><a href="/epp_605_687_spring_2024/posts/Week01/00-Week01Overview">Week1</a></li><li><a href="/epp_605_687_spring_2024/posts/Week02/00-Week02Overview">Week2</a></li><li><a href="/epp_605_687_spring_2024/posts/Week03/00-Week03Overview">Week3</a></li><li><a href="/epp_605_687_spring_2024/posts/Week04/00-Week04Overview">Week4</a></li><li><a href="/epp_605_687_spring_2024/posts/Week05/00-Week05Overview">Week5</a></li><li><a href="/epp_605_687_spring_2024/posts/Week06/00-Week06Overview">Week6</a></li><li><a href="/epp_605_687_spring_2024/posts/Week07/00-Week07Overview">Week7</a></li><li><a href="/epp_605_687_spring_2024/posts/Week08/00-Week08Overview">Week8</a></li><li><a href="/epp_605_687_spring_2024/posts/Week09/00-Week09Overview">Week9</a></li><li><a href="/epp_605_687_spring_2024/posts/Week10/00-Week10Overview">Week10</a></li><li><a href="/epp_605_687_spring_2024/posts/Week11/00-Week11Overview">Week11</a></li><li><a href="/epp_605_687_spring_2024/posts/Week12/00-Week12Overview">Week12</a></li><li><a href="/epp_605_687_spring_2024/posts/Week13/00-Week13Overview">Week13</a></li></ul></nav></div></header><div class="wrapper"><h1>Week 7 - Notification Detail View Example</h1><p style="float: left">Previous:  <A HREF="../06-LocalNotificationsExample/index.html">Local Notifications Example</A></p><p style="float: right">Next:  <A HREF="../../Week08/00-Week08Overview/index.html">Week 8 Overview</A></p><BR/><BR/><center> <iframe width="1280" height="720" src="https://cdnapisec.kaltura.com/html5/html5lib/v2.81.2/mwEmbedFrame.php/p/1458241/uiconf_id/14487351/entry_id/1_gbky6qy2?wid=_1458241&iframeembed=true&playerId=kaltura_player&entry_id=1_gbky6qy2&flashvars[localizationCode]=en&amp;flashvars[leadWithHTML5]=true&amp;flashvars[sideBarContainer.plugin]=true&amp;flashvars[sideBarContainer.position]=left&amp;flashvars[sideBarContainer.clickToClose]=true&amp;flashvars[chapters.plugin]=true&amp;flashvars[chapters.layout]=vertical&amp;flashvars[chapters.thumbnailRotator]=false&amp;flashvars[streamSelector.plugin]=true&amp;flashvars[EmbedPlayer.SpinnerTarget]=videoHolder&amp;flashvars[dualScreen.plugin]=true&amp;flashvars[mediaProxy.preferedFlavorBR]=2500&amp;flashvars[Kaltura.addCrossoriginToIframe]=true&amp;flashvars[EmbedPlayer.NotPlayableDownloadLink]=true;&wid=1_abkvs1gz"allowfullscreen webkitallowfullscreen mozAllowFullScreen allow="autoplay *; fullscreen *; encrypted-media *" sandbox="allow-forms allow-same-origin allow-scripts allow-top-navigation allow-pointer-lock allow-popups allow-modals allow-orientation-lock allow-popups-to-escape-sandbox allow-presentation allow-top-navigation-by-user-activation" frameborder="0" title="Kaltura Player">
  </iframe>
</center><p>To make a detail view, we'll have to define an extension. We haven't discussed extension yet, but basically they are user customized hooks into an exposed extension provided by the operating system. Many extension exist - photo editing, custom keyboards, share extensions, and more - we'll introduce the concept here and dive in a bit more later in the semester.</p><p>To enable this, we’ll need to specify a category for our notification we made in the last video. This allows the extension to recognize which notification it should be associated with. First, make a categoryID, which will be the shared key between the app and extension.</p><pre><code><span class="keyword">let</span> categoryId = <span class="string">"edu.jhu.epp.Grade-Notification-Interface.notification"</span>
</code></pre><p>Then, build a <code>UNNotificationCategory</code> using the identifier, and empty <code>actions</code>, <code>intentIdentifiers</code> and <code>options</code> arrays. Set the notification centers <code>category</code> array to this category wrapped in an array, and set the content’s <code>categoryIdentifier</code> to the <code>categoryID</code>.</p><pre><code><span class="keyword">let</span> category = <span class="type">UNNotificationCategory</span>(identifier: categoryId, actions: [], intentIdentifiers: [], options: [])
notificationCenter.<span class="call">setNotificationCategories</span>([category])

content.<span class="property">categoryIdentifier</span> = categoryId
</code></pre><p>OK, with that set, let’s add an extension to our project. Go back to the project file, and in our target list, add a new target, and choose Notification Content Extension. Call it GradingNotificationExtension, and activate the scheme.</p><img src="../../../week07/notificationExtension.png#centerResizedSlide" alt="Notification Extension"/><p>Before we dive into the code, go into the extension’s Info plist and set the NSExtension-&gt; NSExtensionAttributes-&gt;UNNotificationExtensionCategory to the categoryID we just identified in the main app.</p><img src="../../../week07/notificationInfoPlist.png#centerResizedSlide" alt="Notification Extension"/><p>Now, let’s edit the extension storyboard. This is new for us, because we haven't done anything user interface related with storyboards yet this semester, so I'll try to add some detailed explanations as we build it out.</p><p>Remove the default label, adjust the size to 320 by 320, and set the background to light grey, using the properties pane on the right hand side of Xcode</p><p>From the library, add a table view, pin it to the sides, and create an <code>IBOutlet</code> in the source code, connecting the table to it. <code>IBOutlet</code> allows you to connect widgets such as UIButtons in the storyboard with the corresponding property in the source code. <code>IBOutlet</code> is purely an Xcode construct, and compiles down to a no-op. Don’t forget to set the reuseIdentifier in the table view cell.</p><pre><code><span class="keyword">class</span> NotificationViewController: <span class="type">UIViewController</span>, <span class="type">UNNotificationContentExtension</span>, <span class="type">UITableViewDataSource</span>, <span class="type">UITableViewDelegate</span> {

  <span class="keyword">@IBOutlet weak var</span> tableView: <span class="type">UITableView</span>!
</code></pre><p>Go to the NotificationViewController, remove the reference to the label from the didReceive method, and setup some dummy information to populate our table.</p><pre><code><span class="keyword">let</span> names = [<span class="string">"John Doe"</span>, <span class="string">"Jane Smith"</span>, <span class="string">"Bob Jones"</span>]
</code></pre><p>Unlike the <code>List</code> view in SwiftUI, <code>UITableView</code> needs the help of delegate methods to determine what content should go in the table, and how that table looks. Update the class declaration to include protocols to help with that:</p><pre><code><span class="keyword">class</span> NotificationViewController: <span class="type">UIViewController</span>, <span class="type">UNNotificationContentExtension</span>, <span class="type">UITableViewDataSource</span>, <span class="type">UITableViewDelegate</span> {
</code></pre><p>Implement the <code>numberOfRows</code> and <code>cellForRowAt</code> methods. The number of rows is the count of the array, and for each cell, set the title to the name from the array.</p><pre><code><span class="keyword">func</span> tableView(<span class="keyword">_</span> tableView: <span class="type">UITableView</span>, numberOfRowsInSection section: <span class="type">Int</span>) -&gt; <span class="type">Int</span> {
    <span class="keyword">return</span> <span class="number">3</span>
}

<span class="keyword">func</span> tableView(<span class="keyword">_</span> tableView: <span class="type">UITableView</span>, cellForRowAt indexPath: <span class="type">IndexPath</span>) -&gt; <span class="type">UITableViewCell</span> {
    <span class="keyword">let</span> cell = tableView.<span class="call">dequeueReusableCell</span>(withIdentifier: <span class="string">"reuseIdentifier"</span>)
    cell?.<span class="property">textLabel</span>?.<span class="property">text</span> = names[indexPath.<span class="property">row</span>]
    <span class="keyword">return</span> cell!
}

</code></pre><p>Add another delegate method - <code>titleForHeaderInSection</code>, and return “Grades to be entered”.</p><pre><code><span class="keyword">func</span> tableView(<span class="keyword">_</span> tableView: <span class="type">UITableView</span>, titleForHeaderInSection section: <span class="type">Int</span>) -&gt; <span class="type">String</span>? {
    <span class="keyword">return</span> <span class="string">"Grades to be entered"</span>
}
</code></pre><p>In <code>didReceive</code> just leave a console message stating the notification’s title.</p><pre><code><span class="keyword">func</span> didReceive(<span class="keyword">_</span> notification: <span class="type">UNNotification</span>)
{
    <span class="call">print</span>(<span class="string">"notification title</span> \(notification.<span class="property">request</span>.<span class="property">content</span>.<span class="property">title</span>)<span class="string">"</span>)
}
</code></pre><p>Finally, in the <code>viewDidLoad</code> method, set the table’s delegate and dataSource to be self, and set the <code>preferredContentSize</code> to be the 1/3 the current size of the view.</p><pre><code>tableView.<span class="property">dataSource</span> = <span class="keyword">self</span>
tableView.<span class="property">delegate</span> = <span class="keyword">self
let</span> size = view.<span class="property">bounds</span>.<span class="property">size</span>
preferredContentSize = <span class="type">CGSize</span>(width: size.<span class="property">width</span>, height: size.<span class="property">height</span>/<span class="number">3.0</span>)
</code></pre><p>This keeps the view from being resized by the system.</p><p>You’ll notice that when you go to run this in the simulator, the extension is the active scheme, and when you run it you’re prompted for a real app to simulate it with - choose our EPExampleApp. When the app starts up, go to the Week 7 view, choose the Notifications tab, press the button as before, and in 5 seconds, the notification will fire - this time click on the notification and drag down a bit - your notification’s detail view will then come to life, showing you the students who you still need to do grading for!</p><p style="float: left">Previous:  <A HREF="../06-LocalNotificationsExample/index.html">Local Notifications Example</A></p><p style="float: right">Next:  <A HREF="../../Week08/00-Week08Overview/index.html">Week 8 Overview</A></p></div><footer><p>Generated with ❤️ using <a href="https://github.com/johnsundell/publish">Publish</a></p><p>© 2023-2024 Josh Steele (rsteele3@jhu.edu) <a href="mailto:"(rsteele3@jhu.edu)""></a></p><p>Last updated January 21, 2024 at 1:48 PM</p><p><a href="https://mastodon.social/@hococoder" target="_blank">My Mastodon</a> | <a href="https://github.com/hococoder" target="_blank">My GitHub</a> | <a href="https://ep.jhu.edu" target="_blank">Whiting School EPP</a> | <a href="https://canvas.jhu.edu" target="_blank">JHU Canvas</a></p></footer></body></html>